<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <link rel="stylesheet" href="general.css">
  <link rel="stylesheet" href="background.css">
 <script src="java/input.js" defer></script>
  <script src="java/products.js" defer></script>
  <script src="java/search.js" defer></script>
  <script src="java/accounts.js" defer></script>
  <title>My Cart</title>

  <!-- 1) Accounts & Auth Nav -->
  <script src="java/accounts.js"></script>

  <!-- 2) Cart-storage helpers -->
  <script>
    function getCartKey() {
      const user = JSON.parse(sessionStorage.getItem('pawsclaws_current_user'));
      return user ? `cart_${user.id}` : 'cart_guest';
    }
    function loadCart() {
      return JSON.parse(localStorage.getItem(getCartKey()) || '[]');
    }
    function saveCart(cart) {
      localStorage.setItem(getCartKey(), JSON.stringify(cart));
    }
  </script>

  <!-- 3) Redirect anonymous users -->
  <script>
    if (!sessionStorage.getItem('pawsclaws_current_user')) {
      window.location.href = 'login.html?next=Cart.html';
    }
  </script>
</head>
<body>
    <header>
        <div class="LogoL">
            <a href = "index.html"><img src = "images/paws&claws.jpg" width="80" alt="Paws and Claws Logo">
            </a>
        </div>
<div class = "navi">
        <nav class = "Major">
            <ul>
                <li><a href="all-products.html">All Products</a></li>
                <li class="Drop">
                    <a href="dog-shop.html">Dogs</a>
                    <ul class="dropdown-menu">
                        <li><a href="dog-shop.html?filter=all">All Products</a></li>
                        <li><a href="dog-shop.html?filter=t-a">Toys & Accessories</a></li>
                        <li><a href="dog-shop.html?filter=f-t">Dog Food & Treats</a></li>
                        <li><a href="dog-shop.html?filter=v-s">Vitamins & Supplements</a></li>
                    </ul>
                </li>
                <li class="Drop Drop-cat">
                    <a href="cat-shop.html">Cats</a>
                    <ul class="dropdown-menu">
                        <li><a href="cat-shop.html?filter=all">All Products</a></li>
                        <li><a href="cat-shop.html?filter=t-a">Toys & Accessories</a></li>
                        <li><a href="cat-shop.html?filter=f-t">Cat Food & Treats</a></li>
                        <li><a href="cat-shop.html?filter=v-s">Vitamins & Supplements</a></li>
                    </ul>
                </li>
                <li><a href="Essentials.html">Home Essentials</a></li>

                <li><a href="About.html">About</a></li>
            </ul>
        </nav>

        <nav class = "Minor">
            <ul>

<li class = "search-item">
                <div class="search-container">
                <!-- Magnifier button toggles the search box -->
                <button id="search-toggle" class="search-toggle">
                <img src="images/search.png" width="25" alt="Search">
                </button>
                <!-- Hidden search input and results; shown when container has class "open" -->
                <div class="search-box">
                <input id="search-input" type="text" placeholder="Search products…" autocomplete="off">
                <div id="search-results" class="search-results"></div>
                </div>
              </div>
              </li>
                <li><a href="Cart.html" class = "hover"><img src = "images/cart.png" width="25"></a></li>
                <li><a href="Wish.html" class = "hover"><img src = "images/heart-3510.png" width="25"></a></li>
                <li id="auth-nav-item"><a href="login.html" class = "hover"><img src = "images/login.png" width="25"></a></li>
            </ul>
        </nav>

    </div>



    </header>

<main>
    <div class = "intro">
  <h1>My Cart</h1>
  <p>Total (# items) Price</p>
  <p>Items in your cart are not reserved, check out now to make them yours</p>
  </div>
  <div class="cart-wrapper">
    <!-- Left: Cart Items Table -->
     <div class = "tbl">
    <div class="cart-items">

      <table id="cart-table">
        <thead>
          <tr>
            <th>Product</th>
            <th>Qty</th>
            <th>Unit Price</th>
            <th>Line Total</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    </div>

    <!-- Right: Order Summary -->
     <aside class="order-summary">
  <h2>Order Summary</h2>

  <p><strong># of Items:</strong> <span id="total-items">0</span></p>
  <p><strong>Delivery Fee:</strong> <span id="delivery-fee">₱50.00</span></p>
  <p class="grand"><strong>Total:</strong> <span id="total-price">₱0.00</span></p>

  <!-- Promo as a checkbox, inline with its label -->
<div class="promo-row">
  <label for="promo-code">Promo Code</label>
  <input
    id="promo-code"
    class="promo-input"
    type="text"
    inputmode="numeric"
    maxlength="4"
    pattern="\d{4}"
    placeholder="1234"
    aria-label="Enter 4-digit promo code"
  >
</div>

  <!-- Payment icons as selectable buttons -->
  <div class="payment-icons">
    <label>
      <input type="radio" name="payment" value="cod">
      <img src="images/unnamed (2).png" alt="Cash on Delivery">Cash on Delivery
    </label>
    <label>
      <input type="radio" name="payment" value="visa">
      <img src="images/unnamed.png" alt="online">Gcash
    </label>
    <label>
      <input type="radio" name="payment" value="mastercard">
      <img src="images/unnamed (1).png" alt="Mastercard">Mastercard
    </label>

  </div>

  <a href="checkout.html" id="checkoutBtn" class="checkout-btn">Checkout →</a>
</aside>
  </div>
</main>
<footer class = "footer">
    <div class = "lineF"></div>
<!-- Links to other pages -->
<div class = "footerCon">
    <div class = "footerL">
        <div class = "LinksC">
            <h3>Shops</h3>
        <ul>
             <li><a href = "dog-shop.html">Dog</a></li>
             <li><a href = "cat-shop.html">Cat</a></li>
             <li><a href = "Essentials.html">Home Essentials</a></li>
             <li><a href = "all-products.html">All Products</a></li>
        </ul>
        </div>

        <div class = "LinksC">
            <h3>About</h3>
        <ul>
             <li><a href = "aboutUs.html">About Us</a></li>
             <li><a href = "terms.html">Terms & Condition</a></li>
             <li><a href = "privacy.html">Privacy Policy</a></li>
             <li><a href = "faq.html">FAQs</a></li>
             <li><a href = "contacts.html">Contact Us</a></li>
        </ul>
        </div>
    </div>

<!-- News Form -->

    <div class = "Nletter">
        <form class = "newsletterF">
            <input type = "Email" placeholder = "Enter your email to get the latest news..." required>
            <button type = "submit" class = "signup-btn">Sign Up</button>
        </form>

    </div>

    
</div>
<div class = "lineF"></div>
<div class = "bottomCon">
<div class = "footerB">
    <p>Paws&Claws © 2025. All rights reserved</p>
</div>

<div class="social-icons">
    <a href="https://www.google.com/url?sa=i&url=https%3A%2F%2Ficons8.com%2Ficons%2Fset%2Ffacebook--white&psig=AOvVaw2n77kFBQq3RQYE16vkU3ck&ust=1747181665819000&source=images&cd=vfe&opi=89978449&ved=0CBEQjRxqFwoTCODtmaiVn40DFQAAAAAdAAAAABAE"><img src = "images/fbbilog.png"></a>
    <a href="https://x.com/pawsnclaws2025?s=21&fbclid=IwY2xjawKPIqdleHRuA2FlbQIxMABicmlkETEySWNIMW1iajQ1M3hCcDBlAR6qXoZBpd6C_jvitX5eN1ALL2lUoAU39BJOcyFiImmrOTpJG-5GflheLeZVDQ_aem_DRc0ad6v7lUbWm9QCsdodw"><img src = "images/twitbilog.png"></a>
    <a href="https://www.instagram.com/official_pawsandclaws/profilecard/?igsh=MWxzYWRndDV0NDQ1OA%3D%3D&fbclid=IwY2xjawKPIfFleHRuA2FlbQIxMABicmlkETEySWNIMW1iajQ1M3hCcDBlAR65x-ho7gtXeXJJqUfJRUL_-FPI2MAFoA741JXsMrRFoqSkyDsoYSaoAi01DA_aem__fhwmR42rKG7GB6GBdHzJQ"><img src = "images/instabilog.png"></a>
  </div>

</div>
</footer>
  <style>

.intro {
    margin-left: 80px;
    margin-top: 30px;
}
.tbl {
  background-color: rgb(233, 221, 197);
  margin-left: 60px;
  border: 1px solid #000;
}



/* Table basics */
table { width: 100%; border-collapse: collapse; font-size: 20px;}
th { padding: .5em;  vertical-align: top; border-bottom: 1px solid black;}
td { padding: .5em;  vertical-align: top;}


/* Quantity picker (smaller) */
.quantity-picker {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 0.9em;
}
.quantity-picker button {
  width:24px;
  height:24px;
  border:none;
  background:#000;
  color:white;
  font-size:1em;
  cursor:pointer;
  border-radius:2px;
  line-height:1;
}
.quantity-picker input {
  width:32px;
  text-align:center;
  font-size:0.9em;
  border:1px solid #ccc;
  border-radius:2px;
  padding:2px;
}

/* Remove link under quantity */
.remove-link {
  display: block;
  margin-top: 2px;
  font-size: 0.60em;
  color: rgb(2, 1, 1);
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
}
.remove-link:hover {
  text-decoration: underline;
}

.Column {
    justify-items: center;
}

.cart-wrapper {
  display: flex;
  gap: 2rem;
  margin: 20px;
}

/* Make the table take up about 70% of width */
.cart-items {
  flex: 7;
}

/* ─── Table and Layout (keep your existing rules) ─── */
/* … your .tbl, table, .quantity-picker, .remove-link, .cart-wrapper, etc. … */

/* ─── Order Summary Base Styles ─── */
.order-summary {
  flex: 3;
  background: #f8f5f0;
  padding: 1.5rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  height: fit-content;
  max-width: 400px;
}

.order-summary h2 {
  margin-top: 0;
  margin-bottom: 1rem;
}

/* Remove underline from <p> but underline the <strong> labels */
.order-summary p {
  font-size: 0.95em;
  margin: 0.5rem 0;
  text-decoration: none;
}
.order-summary p strong {
  text-decoration: underline;
}

/* Extra space before Total */
.order-summary p.grand {
  margin-top: 1.5rem;
}

/* ─── Promo Row ─── */
.promo-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 1.5rem;    /* space above the promo checkbox */
  margin-bottom: 1.5rem; /* space below, before icons */
}
.promo-row input[type="checkbox"] {
  width: 1rem;
  height: 1rem;
  cursor: pointer;
}

/* style the 4-digit promo input */
.promo-input {
  width: 4.5rem;         /* enough for 4 digits */
  padding: 0.25rem 0.5rem;
  font-size: 0.95em;
  border: 1px solid #ccc;
  border-radius: 2px;
  text-align: center;
  /* mobile-friendly numeric keyboard hint */
  font-family: monospace;
}

/* ─── Payment Icons ─── */
.payment-icons {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}
.payment-icons input[type=radio] {
  display: none;
}
.payment-icons label {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  cursor: pointer;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.payment-icons label img {
  display: block;
  width: 50px;  /* adjust to your icon dimensions */
  height: auto;
}
/* highlight the selected icon */
.payment-icons label:has(input[type=radio]:checked) {
  border-color: #000;
  box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
}

/* ─── Checkout Button ─── */
.checkout-btn {
  display: block;
  width: 90%;
  padding: 0.75rem;
  background: transparent;
  border: 2px solid black;
  cursor: pointer;
  margin-top: 1rem;
  color: black;
  text-transform: uppercase;
  text-decoration: none;
  text-align: center;
}



  </style>

  <!-- 4) Render & interactivity -->
<script>
  // 1) Load the scoped cart
  let cart = loadCart();

  // 2) Grab the DOM nodes we actually have
  const tbody           = document.querySelector('#cart-table tbody');
  const totalItemsEl    = document.getElementById('total-items');
  const deliveryFeeEl   = document.getElementById('delivery-fee');
  const totalPriceEl    = document.getElementById('total-price');
  const checkoutBtn     = document.getElementById('checkoutBtn');

  // 3) Parse your flat delivery fee from “₱50.00” → 50
  const flatDeliveryFee = parseFloat(
    deliveryFeeEl.textContent.replace(/[^0-9.]/g, '')
  );

  // 4) Render function
  function renderCart() {
    tbody.innerHTML = '';
    let grandTotal = 0;
    let totalItems = 0;

    cart.forEach((item, idx) => {
      const lineTotal = item.price * item.quantity;
      grandTotal += lineTotal;
      totalItems += item.quantity;

      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>
          <img src="${item.image}" alt="${item.name}" width="50" style="vertical-align: middle">
          ${item.name}
        </td>
        <td>
          <div class="Column">
            <div class="quantity-picker">
              <button data-idx="${idx}" class="dec">–</button>
              <input type="text" value="${item.quantity}" readonly>
              <button data-idx="${idx}" class="inc">+</button>
            </div>
            <button data-idx="${idx}" class="remove-link">remove</button>
          </div>
        </td>
        <td>₱${item.price.toFixed(2)}</td>
        <td>₱${lineTotal.toFixed(2)}</td>
      `;
      tbody.appendChild(tr);
    });

    // Update summary panel
    totalItemsEl.textContent = totalItems;
    totalPriceEl.textContent = `₱${(grandTotal + flatDeliveryFee).toFixed(2)}`;
  }

  // 5) Wire up + / – / remove
  tbody.addEventListener('click', e => {
    const idx = e.target.dataset.idx;
    if (e.target.matches('.inc')) {
      cart[idx].quantity++;
    }
    if (e.target.matches('.dec')) {
      if (cart[idx].quantity > 1) cart[idx].quantity--;
    }
    if (e.target.matches('.remove-link')) {
      cart.splice(idx, 1);
    }
    saveCart(cart);
    renderCart();
  });

  // 6) Initial render
  renderCart();
</script>


</body>
</html>
